<div class="text-center dbl-margin-top">
	<section class="search-section">
		<div
			class="qtr-margin-bottom text-small"
			[innerText]="'_CXPortalUserMgmtIsPoweredBySA_' | i18n"
		></div>
		<div class="form-group input--icon half-margin-bottom">
            <div class="form-group__text">
                <input
					[placeholder]="'_SearchUsers_' | i18n"
					data-auto-id="user-search"
					type="search"
					[(ngModel)]="filter"
				>
                <button type="button" class="link">
                    <span class="icon-search"></span>
                </button>
            </div>
        </div>
		<div class="add-user-btn flex text-info">
			<div class="icon-add-contain half-margin-right"></div>
			<div [innerText]="'_AddUser_' | i18n"></div>
		</div>
		<div class="flex text-small">
			<div class="col-6" [innerText]="'_XSmartAccountUsers_' | i18n"></div>
			<div class="col-6" [innerText]="'_XHaveAccessToCXPortal_' | i18n"></div>
		</div>
	</section>
	<div class="responsive-table" *ngIf="users$ | async as users">
		<table class="
			table
			table--selectable
			table--lined
			table--hover
			table--nostripes
			text-left
			"
		>
			<thead>
				<tr>
					<th
						class="sortable"
						(click)="setSort('firstName')"
						[ngClass]="{ 'text-info': sortProps.column === 'firstName' }"
						data-auto-id="name-column-sort"
					>
						<span class="half-margin-right" [innerText]="'_User_' | i18n"></span>
						<span
							class="icon-dropdown text-xsmall"
							[ngClass]="{
								'flipped': sortProps.column === 'firstName'
									&& sortProps.dir === 'desc'
							}"
						></span>
					</th>
					<th
						class="sortable"
						(click)="setSort('companyName')"
						[ngClass]="{ 'text-info': sortProps.column === 'companyName' }"
						data-auto-id="company-column-sort"
					>
						<span class="half-margin-right" [innerText]="'_Company_' | i18n"></span>
						<span
							class="icon-dropdown text-xsmall"
							[ngClass]="{
								'flipped': sortProps.column === 'companyName'
									&& sortProps.dir === 'desc'
							}"
						></span>
					</th>
					<!-- <th [innerText]="'_SmartAccount_' | i18n"></th> -->
					<th [innerText]="'_Role_' | i18n"></th>
					<th></th>
				</tr>
			</thead>
			<tbody *ngIf="!isLoading">
				<tr *ngFor="let user of users | userFilter:filter |userSort:sortProps">
					<td>
						<div class="flex">
							<!-- <div class="user-avatar base-margin-right"> -->
							<!-- 	<div [innerText]="user | initials"></div> -->
							<!-- </div> -->
							<div class="user-info">
								<div
									class="text-xlarge"
									[innerText]="user.firstName + ' ' + user.lastName"
								></div>
								<div [innerText]="user.emailAddress"></div>
							</div>
						</div>
					</td>
					<td [innerText]="user.companyName"></td>
					<!-- <td [innerText]="user.saAccountName || 'Acme Corp'"></td> -->
					<td class="role-cell">
						<select-role [role]="user.roles[0]"></select-role>
					</td>
					<td>
						<cui-dropdown
							icon="icon-more"
							position="left"
							[actions]="userDropdownOptions"
							(actionSelected)="handleUserDropdownSelection($event)"
						>
						</cui-dropdown>
						
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="text-center dbl-margin-top xl-margin-bottom" *ngIf="isLoading">
		<cui-loader [label]="'_Loading_' | i18n"></cui-loader>
	</div>
	<div class="xl-margin-top dbl-margin-bottom text-center">
		<button
			class="btn disabled"
			[innerText]="'_Update_' | i18n"
			(click)="onUpdateClick()"
			data-auto-id="update-btn"
		></button>
	</div>
</div>
