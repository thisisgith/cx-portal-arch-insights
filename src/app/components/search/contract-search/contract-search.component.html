<div *ngIf="loading" class="row no-gutters">
	<div class="col-md-12">
		<div class="innerSpecialPanel panel panel--loose">
			<h4 class="text-uppercase text-muted base-margin-bottom" [innerText]="'_SearchingContracts_' | i18n"></h4>
			<cui-spinner></cui-spinner>
		</div>
	</div>
</div>
<div *ngIf="!loading">
	<div class="half-margin-bottom">
		<dl class="dl--inline">
			<dt class="flex-center-inline-vertical">
				<span class="qtr-margin-right icon-small icon-circle" [ngClass]="statusColor"></span>
				<span class="text-muted" [innerText]="('_Status_' | i18n) + ':'"></span>
				<span class="qtr-margin-left text-muted" *ngIf="contractData?.contractStatus; else unavailable"
					[innerText]="contractData.contractStatus"></span>
			</dt>
		</dl>
	</div>
	<h3 class="qtr-margin-top qtr-margin-bottom" [innerText]="'_ContractX_' | i18n:contractNumber.query"></h3>
	<div class="row half-margin-top">
		<div class="col-md-3">
			<dl class="dl--inline-medium">
				<dt>
					<span class="subheading text-small text-uppercase" [innerText]="'_Type_' | i18n"></span>
				</dt>
				<dd>
					<span *ngIf="contractData?.cxLevel; else unavailable" [innerText]="contractData.cxLevel"></span>
					<span class="qtr-margin-left icon-small icon-info-circle text-muted"
						(mouseenter)="showCxInfo = true" (mouseleave)="showCxInfo = false"></span>
					<div *ngIf="showCxInfo" class="toast toast--loose">
						<div class="toast__body text-small">
							<!-- TODO: Make toast body dynamic according to CX Level -->
							<div class="toast__title">CX Level 2 Includes:</div>
							<div class="toast__message">
								<div>Ask the Expert Webinars</div>
								<div>Access to Lifecycle Communities</div>
								<div>24x7 Software Support (30 minute Critical Response)</div>
								<div>24x7 Hardware Support (30 minute Response)</div>
								<div>24x7 Solution Support (30 minute Response)</div>
								<div>24x7x4hr RMAs</div>
								<div>Access to CX Customer Portal including:</div>
								<ul>
									<li>Adoption view</li>
									<li>Assets view</li>
									<li>Rapid problem resolution</li>
									<li>Personalized exposure checks</li>
									<li>Case status</li>
									<li>Case management KP eyes</li>
									<li>Proactive notifications</li>
								</ul>
								<div>Access to e-learning courses</div>
								<div>Remote practice labs</div>
								<div>Certification prep</div>
							</div>
						</div>
					</div>
				</dd>
				<dt>
					<span class="subheading text-small text-uppercase" [innerText]="'_StartDate_' | i18n"></span>
				</dt>
				<dd>
					<span *ngIf="contractData?.contractStartDate; else unavailable"
						[innerText]="contractData.contractStartDate | date:'dd-MMM-y'"></span>
				</dd>
			</dl>
		</div>
		<div class="col-md-3">
			<dl class="dl--inline-medium">
				<dt>
					<span class="subheading text-small text-uppercase" [innerText]="'_ExpirationDate_' | i18n"></span>
				</dt>
				<dd>
					<span *ngIf="contractData?.contractEndDate; else unavailable"
						[innerText]="contractData.contractEndDate | date:'dd-MMM-y'"></span>
					<span *ngIf="contractData?.contractEndDate" class="qtr-margin-left"
						[innerText]="'(' + (contractData?.contractEndDate | fromNow) + ')'"></span>
				</dd>
				<dt>
					<span class="subheading text-small text-uppercase" [innerText]="'_AssetsCovered_' | i18n"></span>
				</dt>
				<dd>
					<span *ngIf="coverageCount; else loadingCoveragesTemplate" [innerText]="coverageCount"></span>
				</dd>
			</dl>
		</div>
	</div>
</div>

<ng-template #loadingCoveragesTemplate>
	<span *ngIf="loadingCoverages; else unavailable" class="base-margin"></span>
</ng-template>

<ng-template #unavailable>
	<span class="text-muted" [innerText]="'_Unavailable_' | i18n"></span>
</ng-template>
