<admin-wrapper>
	<div *ngIf="error">
		<div class="alert alert--danger" role="alert">
			<div class="alert__icon icon-error-outline"></div>
			<div class="alert__message" [innerText]="errorMessage"></div>
		</div>
	</div>
	<div *ngIf="!loading && cpData?.length" class="container settings-container">
		<div class="row">
			<div class="col-lg-6" data-auto-id="settings.system.status">
				<h5
					class="base-margin-top half-margin-bottom settings__title"
					data-auto-id="settings.system.status.label"
					[innerText]="'_Status_' | i18n | uppercase"
				></h5>
				<div
					class="panel settings-panel panel--bordered-top flex base-margin-right"
					data-auto-id="settings.system.status.panel">
					<div class="col-4">
						<div [innerText]="'_CXCollector_' | i18n"></div>
						<div
							*ngIf="data.lastUploadDate"
							class="text-small"
							[innerText]="'_LastDataSent_' | i18n:(data.lastUploadDate | fromNow)">
						</div>
					</div>
					<div class="col-2" [innerText]="data.ieVersion || ''"></div>
					<div class="col-3">
						<span class="icon-circle half-margin-right" [ngClass]="{
								'active': 'text-success',
								'Running': 'text-success',
								'Restarting...': 'text-warning',
								'Stopped': 'text-secondary',
								'Error': 'text-danger',
								'CrashLoopBackOff':'text-danger'
							}[data.ieStatus]"
						></span>
						<span [innerText]="data.ieStatus || ''"></span>
						<!-- <div> -->
						<!-- 	<span class="icon-circle text-success half-margin-right"></span> -->
						<!-- 	<span>Connected</span> -->
						<!-- </div> -->
					</div>
				</div>
				<div
					*ngIf="data.dnac_details && data.dnac_details[0]"
					class="panel settings-panel panel--bordered-top panel--bordered-bottom base-margin-right"
					data-auto-id="settings.system.status.panel">
					<div class="flex">
						<div class="col-4">
							<div [innerText]="'_CiscoDNACenter_' | i18n"></div>
							<!-- <div class="text-small">Last data sent 6 min ago</div> -->
						</div>
						<div class="col-2" [innerText]="data.dnac_details[0].version || ''"></div>
						<div class="col-3">
							<span class="icon-circle half-margin-right" [ngClass]="{
									'Reachable': 'text-success',
									'Unreachable': 'text-danger'
								}[data.dnac_details[0].status]"
							></span>
							<span [innerText]="data.dnac_details[0].status || ''"></span>
						</div>
						<div *ngIf="data.dnac_details[0]?.additional_details?.error" class="col-3 text-right">
							<a
								data-auto-id="errorLink"
								(click)="data.showError = !data.showError"
								class="no-link-hover"
							>
								<span [innerText]="!data.showError
										? ('_ErrorDetails_' | i18n)
										: ('_HideErrorDetails_' | i18n)"
								></span>
								<span class="qtr-margin-left" [ngClass]="{
										'icon-chevron-down': !data.showError,
										'icon-chevron-up': data.showError
									}"
								></span>
							</a>
						</div>
					</div>
					<div heightTransition [heightTransitionExpanded]="data.showError">
						<div class="base-padding-top half-padding-left" [innerText]="data.dnac_details[0]?.additional_details?.error">
						</div>
					</div>
				</div>
				<!-- <h5
					class="half-margin-bottom settings__title settings__title--margin-top"
					data-auto-id="settings.system.app.label"
					[innerText]="'_Applications_' | i18n | uppercase"
				></h5>
				<div
					*ngFor="let app of data.component_details; index as i"
					data-auto-id="settings.system.app.panel">
					<div class="
						settings-panel
						panel
						panel--bordered-top
						base-margin-right" [ngClass]="{
							'panel--bordered-bottom': i === (data.component_details.length - 1)
						}">
						<div class="flex">
							<div class="col-4" [innerText]="app.name || ''"></div>
							<div class="col-2" [innerText]="app.version || ''"></div>
							<div class="col-3">
								<span
									class="icon-circle half-margin-right"
									[ngClass]="app.status | appStatusColor"
								></span>
								<span [innerText]="app.status || ''"></span>
							</div>
							<div
								*ngIf="app.additional_details?.error"
								class="col-3 text-right">
								<a
									data-auto-id="errorLink"
									(click)="app.showError = !app.showError">
									<span [innerText]="!app.showError
											? ('_ErrorDetails_' | i18n)
											: ('_HideErrorDetails_' | i18n)"
									></span>
									<span class="qtr-margin-left" [ngClass]="{
											'icon-chevron-down': !app.showError,
											'icon-chevron-up': app.showError
										}"></span>
								</a>
							</div>
						</div>
						<div heightTransition [heightTransitionExpanded]="app.showError">
							<div
								class="half-padding-top base-padding-left settings__error"
								[innerText]="app.additional_details?.error"
							></div>
						</div>
					</div>
				</div> -->
			</div>
			<!-- <div class="col-lg-3" data-auto-id="settings.system.usage">
				<h5
					class="base-margin-top half-margin-bottom settings__title"
					data-auto-id="settings.system.usage.label"
					[innerText]="'_SystemUtilization_' | i18n | uppercase"
				></h5>
				<div class="divider settings__divider"></div>
				<div
					*ngFor="let gauge of data.memoryUsage"
					class="flex-center-vertical base-margin-bottom"
					[attr.data-auto-id]="'usage-' + gauge.label">
					<app-gauge
						[percentage]="gauge.percentage"
						[arcColor]="gauge.percentage | guageColor"
						textColor="#243034"
						[width]="82"
					></app-gauge>
					<div class="base-margin-left base-margin-bottom">
						<div class="settings__system__title" [innerText]="gauge.label"></div>
						<div *ngIf="gauge.value" [innerText]="gauge.value" class="settings__system__description"></div>
					</div>
				</div>
			</div>
			<div class="col-lg-3" data-auto-id="settings.system.info">
				<h5
					class="base-margin-top half-margin-bottom settings__title"
					data-auto-id="settings.system.info.label"
					[innerText]="'_SystemInfo_' | i18n | uppercase"
				></h5>
				<div class="divider settings__divider"></div>
				<div
					*ngFor="let info of data.systemInfo"
					[attr.data-auto-id]="'info-' + info.label">
					<div class="half-padding-top base-padding-bottom">
						<div class="settings__info__title" [innerText]="info.label | uppercase"></div>
						<div [innerText]="info.value"></div>
					</div>
				</div>
			</div> -->
		</div>
	</div>
	<div
		*ngIf="loading"
		class="absolute-center">
		<cui-loader></cui-loader>
	</div>
	<div
		class="absolute-center dbl-margin-top"
		*ngIf="!loading && !cpData?.length"
	>
		<h2
			class="dbl-margin-top"
			[innerText]="'_NoResultsFound_' | i18n"
		></h2>
	</div>
</admin-wrapper>
