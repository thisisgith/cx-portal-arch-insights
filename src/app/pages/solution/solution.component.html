<no-dnac-header></no-dnac-header>
<div class="page-container">
	<div class="panel no-padding-left no-padding-right no-padding-bottom base-padding-top panel--bordered-bottom">
		<div class="row base-margin-left half-margin-bottom">
			<div class="col-md-11">
				<ng-container *ngTemplateOutlet="breadcrumbs; context: {}"></ng-container>
			</div>
			<div class="col-md-1">
				<div class="panel panel--compressed panel--mdgray pull-right">
					<span class="icon-arrow-left-tail base-margin-bottom"></span>
					<button class="btn btn--icon btn--white-ghost">
						<span class="icon-lightbulb"></span>
					</button>
				</div>
			</div>
		</div>
		<div class="flex flex-fluid no-margin-bottom">
			<!-- <div class="flex-center base-margin-left base-margin-right">
				<span class="icon-chevron-left icon--mid text-muted"></span>
			</div> -->
			<ng-container *ngTemplateOutlet="facetPanel; context: {}"></ng-container>
			<!-- <div class="flex-center base-margin-left base-margin-right">
					<span class="icon-chevron-right icon--mid text-muted"></span>
			</div> -->
		</div>
	</div>

	<div class="base-margin">
		<router-outlet></router-outlet>
	</div>
</div>

<ng-template #breadcrumbs>
	<div class="flex flex-fluid flex-center-vertical">
		<div class="icon-home icon--mid"></div>
		<div class="icon-chevron-right icon--mid text-muted base-margin-left base-margin-right" *ngIf="selectedSolution"></div>
		<div *ngIf="selectedSolution">
			<div class="text-muted" [innerText]="'_Solution_' | i18n"></div>
			<div class="dropdown dropdown--tail"
				data-auto-id="SolutionDropdown"
				[ngClass]="{'active': solutionDropdown }"
				(click)="useCaseDropdown = false; solutionDropdown = !solutionDropdown">
				<a class="text-dkgray-4 text-large text-bold"
					[innerText]="selectedSolution.name"></a>
				<div class="dropdown__menu">
					<a *ngFor="let solution of solutions"
						attr.data-auto-id="SolutionDropdown-{{ solution.name }}"
						class="text-uppercase"
						(click)="changeSolution(solution)"
						[ngClass]="{
							'selected': selectedSolution.name === solution.name
						}"
						[innerText]="solution.name">
					</a>
				</div>
			</div>
		</div>
		<div class="icon-chevron-right icon--mid text-muted base-margin-left base-margin-right" *ngIf="selectedTechnology"></div>
		<div *ngIf="selectedTechnology">
			<div class="text-muted" [innerText]="'_UseCase_' | i18n"></div>
			<div class="dropdown dropdown--tail"
				data-auto-id="UseCaseDropdown"
				[ngClass]="{'active': useCaseDropdown }"
				(click)="solutionDropdown = false; useCaseDropdown = !useCaseDropdown">
				<a class="text-dkgray-4 text-large text-bold"
					[innerText]="selectedTechnology.name">
				</a>
				<div class="dropdown__menu">
					<a *ngFor="let technology of technologies"
						attr.data-auto-id="TechnologyDropdown-{{ technology.name }}"
						(click)="changeTechnology(technology)"
						[ngClass]="{ 'selected': selectedTechnology.name === technology.name }"
						[innerText]="technology.name">
					</a>
				</div>
			</div>
		</div>
	</div>
</ng-template>

<ng-template #facetPanel>
	<div class="row no-gutters flex-fill">
		<div *ngFor="let facet of facets; index as i"
			attr.data-auto-id="Facet-{{ facet.title }}"
			(click)="selectFacet(facet, true)"
			class="panel panel--bordered-right row flex-fluid"
			[ngClass]="{
				'panel--bordered-left': i === 0,
				'facet--selected': facet.selected
			}">
			<div class="col-md-12 flex-center">
				<ng-container *ngTemplateOutlet="facet.template; context: { facet: facet }"></ng-container>
				<div class="half-margin-left text-small facetLabel" *ngIf="facet.label">
					<span [innerText]="facet.label"></span>
				</div>
			</div>
			<div class="col-md-12 flex-center base-padding-top">
				<span [ngClass]="{ 'text-primary': facet.selected }" [innerText]="facet.title | uppercase"></span>
			</div>
		</div>
	</div>
</ng-template>

<ng-template #lifecycleFacet let-facet="facet">
	<cui-gauge percentage="75"
		value="75%"
		color="primary">
	</cui-gauge>
</ng-template>

<ng-template #assetsFacet let-facet="facet">
	<cui-gauge [percentage]="facet?.data?.gaugePercent || 0"
		value="{{ facet?.data?.gaugeLabel || '0%' }}"
		color="primary">
	</cui-gauge>
</ng-template>

<ng-template #securityFacet let-facet="facet">
	<cui-gauge percentage="75"
		value="75%"
		color="primary">
	</cui-gauge>
</ng-template>

<ng-template #advisoriesFact let-facet="facet">
	<div class="full-width">
		<bar-chart *ngIf="advisoriesFacet?.seriesData && !advisoriesFacet?.loading" [seriesData]="advisoriesFacet?.seriesData"></bar-chart>
		<div class="dbl-margin-top base-margin-bottom" *ngIf="advisoriesFacet?.loading">
			<cui-spinner></cui-spinner>
		</div>
	</div>
</ng-template>

<ng-template #resolutionFacet let-facet="facet">
	<div *ngIf="(casesCount == 0 && RMACount == 0); else caseCountContent">
		<ng-container *ngTemplateOutlet="noCaseContent"></ng-container>
	</div>
	<ng-template #noCaseContent>
		<div class="text-muted text-large base-padding-left base-padding-right dbl-padding-top qtr-padding-bottom" [innerText]="'_NoOpenCases_' | i18n"></div>
		<div class="text-muted text-large base-padding-left base-padding-right base-padding-bottom" [innerText]="'_NoOpenRMAs_' | i18n"></div>
	</ng-template>
	<ng-template #caseCountContent>
		<div class="row no-margin base-padding-left base-padding-right">
			<div class="col-5">
				<div data-auto-id="openCases" class="text-muted text-xlarge" [innerText]="'_OpenCases_' | i18n"></div>
			</div>
			<div class="col-7 no-padding-left">
				<div class="text-huge opacity-50">{{casesCount}}</div>
			</div>
			<div class="col-5 base-padding-top">
				<div data-auto-id="openRMAs" class="text-primary text-xlarge" [innerText]="'_WithRMAs_' | i18n"></div>
			</div>
			<div class="col-7 no-padding-left base-padding-top">
				<div class="text-huge opacity-50">{{RMACount}}</div>
			</div>
		</div>
	</ng-template>
</ng-template>

<ng-template #insightsFacet let-facet="facet">
	<cui-gauge percentage="75"
		value="75%"
		color="primary">
	</cui-gauge>
</ng-template>

<cui-modal></cui-modal>
