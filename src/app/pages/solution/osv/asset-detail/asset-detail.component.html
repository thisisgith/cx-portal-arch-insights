<div class="row dbl-margin-top">
	<div class="col-md-8">
		<div class="text-large text-bold" [innerText]="'_OsvSoftwareVersionSummary_' | i18n | uppercase"></div>		
	</div>
	<div class="col-md-4 pull-right">
		<div class="btn-group btn-group--square half-margin-right pull-right">
			<button data-auto-id="list-view-btn" class="btn btn--small btn--gray-ghost"
				[ngClass]="{ 'selected': view == 'list' }" (click)=" view = 'list'">
				<span class="icon-list-view"></span>
			</button>
			<button data-auto-id="timeline-view-btn" class="btn btn--small btn--gray-ghost"
				[ngClass]="{ 'selected': view == 'timeline' }" (click)="view = 'timeline'">
				<span class="icon-time"></span>
			</button>
		</div>

	</div>
</div>


<!-- spinner -->
<div class="dbl-margin-top" *ngIf="status.isLoading">
	<cui-spinner></cui-spinner>
</div>

<!-- timeline view -->
<div class="dbl-margin-top" *ngIf="!status.isLoading && assetDetails && assetDetails?.length > 0 && view =='timeline'">
	<app-asset-timeline-chart (selectedPoint)="selectedPoint($event)" [data]="assetDetails" [fullscreen]="fullscreen">
	</app-asset-timeline-chart>
</div>

<!-- no recommendations found -->
<div *ngIf="!status.isLoading && assetDetails && assetDetails?.length == 0">
	<div class="flex-center-horizontal text-xlarge text-muted dbl-margin-top half-margin-bottom"
		[innerText]="'_OsvNoRecommendations_' | i18n"></div>
</div>

<!-- asset-details table view -->
<div class="dbl-margin-top" *ngIf="!status.isLoading && assetDetails && assetDetails?.length > 0  && view =='list'">
		<table class="table table--selectable table--compressed table--wrap table--lined table--hover">
				<thead>
					<tr>
						<th *ngFor="let column of assetDetailsTable.columns"
							[ngClass]="{ 'sortable': column.sortable, 'sorted': column.sorting }"
							(click)="sortTable(column)" attr.data-auto-id="AssetDetailsTable-{{column.key}}">
							<span [innerText]="column.name"></span>
							<span *ngIf="column.sortable && column.sorting" class="qtr-margin-left" [ngClass]="{
											'icon-chevron-down': column.sortDirection === 'asc',
											'icon-chevron-up': column.sortDirection === 'desc'
										}">
							</span>
						</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let item of assetDetails" (click)="onRowSelect(item)" [ngClass]="{ 'active': item.rowSelected }"
						attr.data-auto-id="AssetDetails-{{ item.swVersion }}">
						<td *ngFor="let column of assetDetailsTable.columns" [ngStyle]="{ 'width': column.width }"
							(click)="column.click ? $event.stopPropagation() : null"
							attr.data-auto-id="AssetDetailItemClickHandler-{{ item.swVersion }}">
							<ng-container *ngIf="column.template">
								<ng-container *ngTemplateOutlet="column.template; context: { celldata: item }">
								</ng-container>
							</ng-container>
							<ng-container *ngIf="!column.template">
								<span *ngIf="column.render" [innerHTML]="column.render(item)"></span>
								<span *ngIf="!column.render" [innerText]="item[column.key]"></span>
							</ng-container>
						</td>
					</tr>
				</tbody>
			</table>
</div>
<!-- view all os version link -->
<div class="markup pull-right dbl-margin-top" *ngIf="!status.isLoading && assetDetails?.length > 0">
	<a class="markup-toggle link">
		<span class="markup-label text-primary" [innerText]="'_OsvViewAllOSVersions_' | i18n"></span>
		<span class="icon-popout icon-small qtr-margin-left text-primary"></span>
	</a>
</div>

<ng-template #versionTemplate let-item="celldata">
	<div>
		<span class="text-capitalize" [ngClass]="{'text-bold':item.name == 'current'}">{{item.name}}</span>
		<span  class="qtr-margin-left text-primary" [attr.data-balloon]="item.info" data-balloon-pos="right" data-balloon-length="xlarge">
				<i class="icon-info-outline icon-xsmall"></i>
		</span>
	</div>
</ng-template>
