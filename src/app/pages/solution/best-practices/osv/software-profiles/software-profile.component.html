<div class="row">
	<div class="col-md-9 flex flex-fill">
		<div class="flex-center-vertical">
			<span [innerText]="'_OsvSoftwareProfiles_' | i18n" class="text-large"></span>
			<span *ngIf="pagination"
				[innerText]="'_ShowingXofYSoftwareProfiles_' | i18n:paginationCount:pagination.total"
				class="qtr-margin-left text-small text-muted" data-auto-id="ShowingSoftwareProfilesCount">
			</span>
		</div>
	</div>
</div>
<div class="divider qtr-margin-top"></div>
<ng-container *ngTemplateOutlet="tableProfileGroups"></ng-container>
<div *ngIf="pagination" class="base-margin-top">
	<cui-pager [page]="pagination.page - 1" [limit]="pagination.rows" [totalItems]="pagination.total || 0"
		(onPageChanged)="onPageChanged($event)">
	</cui-pager>
</div>
<div *ngIf="status.isLoading">
	<cui-spinner></cui-spinner>
</div>

<ng-template #tableProfileGroups>
	<div class="responsive-table" *ngIf="!status.isLoading && profileGroupsTable && profileGroups.length">
		<table class="table table--selectable table--compressed table--wrap table--lined table--hover">
			<thead>
				<tr>
					<th *ngFor="let column of profileGroupsTable.columns"
						[ngClass]="{ 'sortable': column.sortable, 'sorted': column.sorting }">
						<span [innerText]="column.name"></span>
						<span *ngIf="column.sortable && column.sorting" class="qtr-margin-left" [ngClass]="{
										'icon-chevron-down': column.sortDirection === 'asc',
										'icon-chevron-up': column.sortDirection === 'desc'
									}">
						</span>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let item of profileGroups" (click)="onRowSelect(item)"
					[ngClass]="{ 'active': item.details }" attr.data-auto-id="ProfileGroups-{{ item.softwareProfile }}">
					<td *ngFor="let column of profileGroupsTable.columns" [ngStyle]="{ 'width': column.width }"
						(click)="column.click ? $event.stopPropagation() : null"
						attr.data-auto-id="ProfileGroupsItemClickHandler-{{ item.softwareProfile }}">
						<ng-container *ngIf="column.template">
							<ng-container *ngTemplateOutlet="column.template; context: { celldata: item.data }">
							</ng-container>
						</ng-container>
						<ng-container *ngIf="!column.template">
							<span *ngIf="column.render" [innerHTML]="column.render(item)"></span>
							<span *ngIf="!column.render" [innerText]="item[column.key]"></span>
						</ng-container>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</ng-template>


<ng-template #actionsTemplate let-celldata="celldata">
	<cui-dropdown (actionSelected)="onActionSelected($event)" [actions]="getRowActions(celldata)" position="left"
		icon="icon-more icon-medium text-muted rotate-90">
	</cui-dropdown>
</ng-template>
