<div class="panel panel--bordered base-padding-left base-padding-top no-padding-bottom">
		<visual-filter-bar [filters]="filters">
			<ng-template #startingCard>
				<div class="filter__selected">
					<div
						data-auto-id="highCrashCount"
						class="base-margin-bottom qtr-margin-top cursor"
						(click)="getHighCrashesDeviceData()"
						[ngClass]="{ 'text-primary': onlyCrashes }"
					>
						<div
							class="text-huge flex-center dbl-padding-left dbl-padding-right"
							[innerText]="highCrashDeviceCount"
						></div>
						<div
							class="text-large flex-center"
							[innerText]="'_RMHighCrashRiskAssets_' | i18n"
						></div>
					</div>
					<div
						data-auto-id="lastDayData"
						class="half-margin-bottom qtr-margin-top cursor"
						(click)="getAllCrashesData()"
						[ngClass]="{ 'text-primary': !onlyCrashes }"
					>
						<div
							class="text-huge flex-center dbl-padding-left dbl-padding-right"
							[innerHTML]="crashedAssetsCount"
						>
						</div>
						<div
							class="text-large flex-center"
							[innerText]="'_RMCrashedAssets_' | i18n"
						></div>
					</div>
				</div>
			</ng-template>
		</visual-filter-bar>
	</div>
	<div class="divider qtr-margin half-margin-bottom"></div>

	<!-- filter tab -->
	<ng-container>
		<ng-container *ngTemplateOutlet="filterBar"></ng-container>
	</ng-container>
	<div class="row">
		<div class="col-auto qtr-margin-top flex flex-fill flex-center-vertical">
			<span class="font15" [innerText]="'_RMAssets_' | i18n"></span>
			<span *ngIf="onlyCrashes" [innerText]="'_RMShowingXofYAssets_' | i18n:hcrPagination:highCrashRiskAssetsGridDetails.totalItems"
				class="qtr-margin-left text-small text-muted" data-auto-id="ShowingAssetsCount">
			</span>
			<span *ngIf="!onlyCrashes" [innerText]="'_RMShowingXofYAssets_' | i18n:crashPagination:crashedAssetsGridDetails.totalItems"
				class="qtr-margin-left text-small text-muted" data-auto-id="ShowingAssetsCount">
			</span>
		</div>
		<div class="col-auto">
			<cui-search *ngIf="!onlyCrashes"
				placeholder="{{ '_Search_' | i18n }}"
				[debounce]="searchOptions.debounce"
				[compressed]="true"
				[searchText] = "searchQueryInCrashGrid"
				(onUpdate)="onSearchQuery($event)"
				class="risk-mitigation-search"
			>
			</cui-search>
			<cui-search *ngIf="onlyCrashes"
				placeholder="{{ '_Search_' | i18n }}"
				[debounce]="searchOptions.debounce"
				[compressed]="true"
				[searchText] = "searchQueryInHighCrashGrid"
				(onUpdate)="onSearchQuery($event)"
				class="risk-mitigation-search"
			>
			</cui-search>
		</div>
	</div>
	<div class="divider qtr-margin"></div>

<ng-template #advisoryFilter let-filter="filter">
	<div [hidden]="onlyCrashes">
		<risk-mitigation-column-chart
			[resetChart]="clearAllFilters"
			[seriesData]="filter.seriesData"
			(subfilter)="onSubfilterSelect($event, filter)"
		>
		</risk-mitigation-column-chart>
	</div>
</ng-template>

<ng-template #filterBar>
	<div class="row flex-center-vertical half-margin-top base-margin-bottom">
		<div class="col-md-11 flex">
			<span
				class="flex flex-center-vertical base-margin-left half-margin-right filter-bar__title"
				[innerText]="'_RMFiltered_' | i18n"
			></span>
			<ng-container *ngFor="let filter of selectedFilters">
				<ng-container
					*ngFor="let subfilter of getSelectedSubFilters(filter.key)"
				>
					<span
						class="label filter-bar__item"
						(click)="onSubfilterSelect(subfilter.filter, filter)"
						attr.data-auto-id="FilterTag-{{ subfilter.filter }}"
						*ngIf="!onlyCrashes"
					>
						<span class="qtr-padding-right" [innerText]="'_RMTimeLast_' | i18n"></span>
						<span [innerHTML]="subfilter.label"></span>
						<span
							class="icon-close"
							(click)="clearFilters()" data-auto-id="FilterBarClearAllFiltersIcon"
						></span>
					</span>
				</ng-container>
			</ng-container>
		</div>
		<div class="col-md-1 flex flex-center flex-center-vertical filter-bar__clear">
			<a
				(click)="clearFilters()"
				[innerText]="'_RMClearAll_' | i18n"
				data-auto-id="FilterBarClearAllFilters"
			>
			</a>
		</div>
	</div>
</ng-template>

<div *ngIf="!onlyCrashes; else assetsWithCrashRisk">
		<div *ngIf="!crashedAssetsGridDetails.tableData.length && !status.isLoading">
				<div class="text-center dbl-margin-top dbl-margin-bottom">
					<div>
						<span class="text-muted text-xlarge"
							[innerText]="'_NoResultsFound_' | i18n"
							data-auto-id="NoResultsFoundTxt" >
						</span>
					</div>

				</div>
			</div>


	<cui-table  *ngIf="crashedAssetsGridDetails.tableData.length && !status.isLoading"
		(onTableRowClicked)="onRowClicked($event)"
		[data]="crashedAssetsGridDetails.tableData"
		[limit]="crashedAssetsGridDetails.tableLimit"
		[offset]="crashedAssetsGridDetails.tableOffset"
		[options]="crashesAssetsGridOptions"
		class="table--wrap not-close-360"
	></cui-table>
	<div class="section" *ngIf="!status.isLoading">
		<cui-pager
			*ngIf="crashedAssetsGridDetails.tableData.length"
			[page]="crashedAssetsGridDetails.tableOffset"
			[limit]="crashedAssetsGridDetails.tableLimit"
			[totalItems]="crashedAssetsGridDetails.totalItems"
			(onPageChanged)="onPagerUpdated($event)"
		></cui-pager>
	</div>
</div>
<div *ngIf="status.isLoading">
	<cui-spinner></cui-spinner>
</div>
<ng-template #assetsWithCrashRisk>

		<div *ngIf="!highCrashRiskAssetsGridDetails.tableData.length && !status.isLoading">
				<div class="text-center dbl-margin-top dbl-margin-bottom">
					<div>
						<span class="text-muted text-xlarge"
							[innerText]="'_NoResultsFound_' | i18n"
							data-auto-id="NoResultsFoundTxt" >
						</span>
					</div>
				</div>
			</div>

	<cui-table [hidden]="!highCrashRiskAssetsGridDetails.tableData.length || status.isLoading"
		[options]="highCrashRiskAssetsGridOptions"
		[data]="highCrashRiskAssetsGridDetails.tableData"
		(onTableRowClicked)="connectToFpDetails($event)"
		(onSortingChanged)="highCrashTableSorted($event)"
		class="table--wrap not-close-360"
	></cui-table>
	<div class="section" *ngIf="!status.isLoading">
		<cui-pager
			*ngIf="highCrashRiskAssetsGridDetails.totalItems"
			[page]="highCrashRiskAssetsGridDetails.tableOffset"
			[limit]="highCrashRiskAssetsGridDetails.tableLimit"
			[totalItems]="highCrashRiskAssetsGridDetails.totalItems"
			(onPageChanged)="onHcrPagerUpdated($event)"
		></cui-pager>
	</div>
</ng-template>


<asset-details *ngIf="selectedAsset"
    [asset]="assetLinkInfo?.asset"
    [serialNumber]="assetLinkInfo?.asset?.serialNumber"
    [element]="assetLinkInfo?.element"
 		(close)="onPanelClose()">
</asset-details>

<details-panel
	*ngIf="selectedAsset && showAsset360"
	[hidden]="!selectedAsset && !showAsset360"
	(hiddenChange)="handleHidden($event)"
	[fullscreen]="fullscreen"
>
	<details-panel-header
		(close)="onPanelClose()"
		[(fullscreen)]="fullscreen"
		[fullscreenToggle]="false"
	>
		<div class="half-margin-left">
			<div class="text-xlarge">
				<span
					class="qtr-margin-left"
					[innerText]="'_RMCrashHistoryFor_' | i18n"
				></span>
				<span class="qtr-margin-left">
						<span class="text-info">&#60;</span>
					<a
						data-auto-id="selectedName"
						(click)="redirectToAsset360()"
						[innerHTML]="selectedAsset.neName"
						></a
					>
					<span class="text-info">&#62;</span>
				</span>
			</div>
			<div class="divider"></div>
			<div class="row">
				<div class="col-3">
					<div class="row">
						<div
							class="col-12  text-bold"
							[innerText]="'_IPAddress_' | i18n | uppercase"
						></div>
						<div
							class="col-md-12"
							[innerText]="selectedAsset?.ipAddress"
						></div>
					</div>
				</div>
				<div class="col-3">
					<div class="row">
						<div
							class="col-md-12 text-bold"
							[innerText]="'_SerialNumber_' | i18n | uppercase"
						></div>
						<div
							class="col-md-12"
							[innerText]="selectedAsset?.serialNumber"
						></div>
					</div>
				</div>
				<div class="col-6">
					<div
						class="col-md-12 text-bold"
						[innerText]="'_RMNumberOfCrashesInCrashHistory_' | i18n | uppercase"
					></div>
					<div
						class="col-md-12"
						[innerText]="crashHistoryGridDetails?.tableData.length"
					></div>
				</div>
			</div>
		</div>
	</details-panel-header>
	<cui-table *ngIf = "!isCrashHistoryLoading"
		[options]="crashHistoryGridOptions"
		[data]="crashHistoryGridDetails.tableData"
	></cui-table>
	<cui-loader  color="muted" *ngIf = "isCrashHistoryLoading"></cui-loader>
</details-panel>
<details-panel
	*ngIf="showFpDetails  && !showAsset360"
	[hidden]="!showFpDetails  && showAsset360"
	(hiddenChange)="handleHidden($event)"
	[fullscreen]="fullscreen"
	[minWidth]="'1024px'"
>
	<details-panel-header
		(close)="onFPDPanelClose()"
		[(fullscreen)]="fullscreen"
		[fullscreenToggle]="false"
	>
		<app-fingerprint-header
			[asset]="selectedFingerPrintdata"
		></app-fingerprint-header>
		<div detailsPanelTitle class="text-xlarge">
			<span
				class="base-margin-left"
				[innerText]="'_CP_FingerPrintDetailsFor_' | i18n"
			></span>
			<span class="qtr-margin-left">
				<a
					data-auto-id="selectedName"
					[innerHTML]="selectedFingerPrintdata.deviceName"
					(click) = "showAsset360 = true;"
				></a>
			</span>
		</div>
	</details-panel-header>
	<app-fingerprint-body
		[asset]="selectedFingerPrintdata"
	></app-fingerprint-body>
</details-panel>
<ng-template #cardColors let-item="celldata">
	<span
	  [ngClass]="{
		'text-success': item.globalRiskRank === 'LOW',
		'text-warning': item.globalRiskRank === 'MED',
		'text-danger': item.globalRiskRank === 'HIGH'
	  }" class="qtr-margin-right icon-circle"
	>
	</span>
	<span [innerText]="item.globalRiskRank"></span>
</ng-template>
<ng-template #lastOccuranceTemplate let-item="celldata">
	<span title="{{ item?.lastOccurrence }}" [innerText]= "item.lastOccurrence">
	</span>
</ng-template>
<ng-template #firstOccuranceTemplate let-item="celldata">
	<span title="{{ item?.firstOccurrence }}" [innerText]= "item.firstOccurrence">
	</span>
</ng-template>
<ng-template #swVersionTemplate let-item="celldata">
	<span title="{{ item?.swVersion }}" [innerText]= "item.swVersion">
	</span>
</ng-template>
<ng-template #neNameTemplate let-item="celldata">
	<span title="{{ item?.neName }}" [innerText]= "item.neName">
	</span>
</ng-template>
<ng-template #productIdTemplate let-item="celldata">
	<span title="{{ item?.productId }}" [innerText]= "item.productId">
	</span>
</ng-template>
<ng-template #productFamilyTemplate let-item="celldata">
	<span title="{{ item?.productFamily }}" [innerText]= "item.productFamily">
	</span>
</ng-template>
<ng-template #deviceNameTemplate let-item="celldata">
	<span title="{{ item?.deviceName }}" [innerText]= "item.deviceName">
	</span>
</ng-template>
<ng-template #softwareTypeTemplate let-item="celldata">
	<span title="{{ item?.softwareType }}" [innerText]= "item.softwareType">
	</span>
</ng-template>
<ng-template #softwareVersionTemplate let-item="celldata">
	<span title="{{ item?.softwareVersion }}" [innerText]= "item.softwareVersion">
	</span>
</ng-template>
<ng-template #riskScoreTemplate let-item="celldata">
	<span title="{{ item?.riskScore }}" [innerHTML]="item.riskScore"></span>
</ng-template>
<ng-template #resetReasonTemplate let-item="celldata">
	<span title="{{ item?.resetReason }}" [innerHTML]="item.resetReason"></span>
</ng-template>
<ng-template #timeStampTemplate let-item="celldata">
	<span title="{{ item?.timeStamp }}" [innerHTML]="item.timeStamp"></span>
</ng-template>
