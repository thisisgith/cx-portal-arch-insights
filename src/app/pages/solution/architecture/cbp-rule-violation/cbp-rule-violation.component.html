<!-- App Details 360 slide-out -->
<details-panel *ngIf="exceptionObject" [hidden]="!exceptionObject" [fullscreen]="fullscreen">
	<details-panel-header (close)="onPanelClose()" [(fullscreen)]="fullscreen" [fullscreenToggle]="false">
		<!-- <cbp-header [cbpDetails]="exceptionObject"></cbp-header> -->
		<div detailsPanelTitle class="text-xlarge">
			<!-- <span class="icon-left-arrow"  data-auto-id="PanelClose" (click)="onPanelClose()"></span>
			<span class="icon-right-arrow" disabled></span> -->

			<span [innerText]="exceptionObject?.bpRuleTitle"></span>
		</div>
		<div class="row ">

			<div class="col-md-8 base-margin-bottom">
				<div class="flex" *ngIf="exceptionObject">
					<div class="dbl-margin-right">
						<div class="text-bold text-uppercase" [innerText]="'_ArchitectureSeverity_' | i18n"></div>
						<div><span class="qtr-margin-right icon-circle" [ngClass]="{
												'High': 'text-danger',
												'Medium': 'text-warning',
												'Low': 'text-warning-alt'
											}[exceptionObject?.severity]"></span>
							{{ exceptionObject?.severity }}
						</div>
					</div>

					<div class="dbl-margin-right">
						<div class="text-bold text-uppercase" [innerText]="'_ArchitectureSoftwareType_' | i18n"></div>
						<div innerText="{{ exceptionObject?.softwareType }}"></div>
					</div>
				</div>
			</div>
			<div class="col-md-12 base-margin-bottom">
				<div class="dbl-margin-right">
					<div class="text-bold text-uppercase" [innerText]="('_ArchitectureSummary_' | i18n)+':'"></div>
					<div>{{exceptionObject?.bpRuleSummary}}</div>
				</div>
			</div>
		</div>
	</details-panel-header>
	<cbp-device-affected [cbpDetails]="exceptionObject"></cbp-device-affected>
</details-panel>

<div class="row base-margin-top">
		<div class="col-md-4">
			<div class="container" *ngIf="cbpRuleExceptions.length > 0">
				<span [innerText]="'_ArchitectureException_' | i18n" class="text-large"></span>
				<span class="qtr-margin-left text-small text-muted">showing
					{{ (tableStartIndex + 1) +' - ' +  tableEndIndex }}
					of {{totalItems}}</span>
			</div>
		</div>
		<div class="col-md-8">
				<div>
					<form
						#f="ngForm"
						class="row flex flex-fluid flex-right qtr-margin-right"
						id="searchForm"
						(keydown)="globalSearchFunction($event)"
					>
						<div class="qtr-padding-top">
							<div class="container">
								<span [innerText]="'_ArchitectureLastUpdated_' | i18n" class="text-large"></span>
								<span class="qtr-margin-left text-small text-muted">{{lastCollectionTime}}</span>
							</div>
						</div>
						<div>
							<div class="flex-fill form-group input--compressed input--icon half-margin-right">
								<div class="form-group__text">
									<input
										data-auto-id="globalSearch"
										#globalSearch="ngModel"
										[(ngModel)]="globalSearchText"
										name="globalSearch"
										type="text"
										class="form-control"
										placeholder="{{ '_ArchitectureGlobalSearch_' | i18n }}"
									/>
									<button type="button" class="link" tabindex="-1">
										<span class="icon-search"></span>
									</button>
								</div>
							</div>
						</div>
						<div class="view-change-icons">
								<!-- <div class="btn-group btn-group--square half-margin-right">
									<button class="btn btn--small btn--gray-ghost disabled">
										<span class="icon-location"></span>
									</button>
									<button
										data-auto-id="list-view-btn"
										class="btn btn--small btn--gray-ghost"
									>
										<span class="icon-list-view"></span>
									</button>
									<button
										data-auto-id="grid-view-btn"
										class="btn btn--small btn--gray-ghost"
									>
										<span class="icon-grid-view"></span>
									</button>
								</div> -->
							</div>
							<!-- <cui-dropdown position="left" icon="icon-more icon-small text-muted rotate-90">
							</cui-dropdown> -->
					</form>
				</div>
			</div>
</div>
<div class="divider no-qtr-margin"></div>

<div class="panel">
	<cui-table *ngIf="!isLoading && totalItems" [options]="tableOptions" [data]="cbpRuleExceptions"
		(onTableRowClicked)="onTableRowClicked($event)"></cui-table>
	<div class="section" *ngIf="totalItems">
		<cui-pager *ngIf="!isLoading" [page]="paramsType.page" [limit]="paramsType.pageSize" [totalItems]="totalItems"
			(onPageChanged)="onPagerUpdated($event)"></cui-pager>
	</div>
	<div class="base-margin-top" *ngIf="isLoading">
		<cui-spinner></cui-spinner>
	</div>
	<div *ngIf="!cbpRuleExceptions.length && !isLoading">
		<div class="text-center dbl-margin-top dbl-margin-bottom">
			<div>
				<span class="text-muted text-xlarge" [innerText]="'_NoResultsFound_' | i18n"
					data-auto-id="NoResultsFoundTxt">
				</span>
			</div>
		</div>
	</div>
</div>
<ng-template #riskTemplate let-item="celldata">
	<span class="qtr-margin-right icon-circle" [ngClass]="{
			'High': 'text-danger',
			'Medium': 'text-warning',
			'Low': 'text-warning-alt'
	}[item.severity]">
	</span>
	<span>{{item.severity}}</span>
</ng-template>