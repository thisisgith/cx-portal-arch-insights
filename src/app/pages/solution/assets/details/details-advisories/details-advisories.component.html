<div class="flex flex-fluid flex-center-horizontal">
	<div class="flex-fill btn-group btn-group--wide">
		<button *ngFor="let tab of tabs"
			class="btn btn--primary-ghost"
			[ngClass]="{
				'selected': tab.selected,
				'disabled': tab.disabled
			}"
			(click)="selectTab(tab)"
			attr.data-auto-id="AdvisoryTab-{{ tab.key }}"
			[innerText]="tab.title | i18n">
		</button>
	</div>
</div>
<div class="base-margin-top" *ngIf="visibleTab">
	<ng-container *ngTemplateOutlet="visibleTab"></ng-container>
</div>

<ng-template #security>
	<ng-container *ngTemplateOutlet="displayTable; context: { data: selectedTab.data, options: selectedTab.table, loading: selectedTab.loading }"></ng-container>
</ng-template>

<ng-template #fieldNotices>
	<ng-container *ngTemplateOutlet="displayTable; context: { data: selectedTab.data, options: selectedTab.table, loading: selectedTab.loading }"></ng-container>
</ng-template>

<ng-template #bugs>
	bugs template
</ng-template>

<ng-template #displayTable let-data="data" let-options="options" let-loading="loading">
	<cui-table *ngIf="!loading && options && data && data?.bulletin?.length > 0"
		[options]="options"
		[data]="data.bulletin">
	</cui-table>
	<div *ngIf="loading">
		<cui-loader></cui-loader>
	</div>
	<div *ngIf="!loading && data?.bulletin?.length === 0">
		<span [innerText]="'_NoResultsFound_' | i18n"></span>
	</div>
</ng-template>

<ng-template #impact let-celldata="celldata">
	<span class="label label--circle label--tiny qtr-margin-right"
		[ngClass]="{
			'label--danger': celldata.severity === 'Critical',
			'label--warning': celldata.severity === 'High',
			'label--warning-alt': celldata.severity === 'Medium',
			'label--success': celldata.severity === 'Low'
		}">
	</span>
	<ng-container [ngSwitch]="celldata.severity">
		<span *ngSwitchCase="'Critical'" [innerText]="'_Critical_' | i18n"></span>
		<span *ngSwitchCase="'High'" [innerText]="'_High_' | i18n"></span>
		<span *ngSwitchCase="'Medium'" [innerText]="'_Medium_' | i18n"></span>
		<span *ngSwitchCase="'Low'" [innerText]="'_Low_' | i18n"></span>
		<span *ngSwitchDefault [innerText]="'_Unknown_' | i18n"></span>
	</ng-container>
</ng-template>

<ng-template #fieldNoticeID let-celldata="celldata">
	<a innerText="FN {{ celldata.fieldNoticeId }}"
		target="_blank"
		[href]="celldata.URL">
	</a>
</ng-template>
