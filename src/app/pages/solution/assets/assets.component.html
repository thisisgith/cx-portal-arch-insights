<div class="panel">
	<div class="row">
		<div class="col-md-8">
			<ul class="tabs remove-shadow">
				<li *ngFor="let tab of tabs"
					[ngClass]="{ 'active': tab.selected }" [attr.disabled]="tab.disabled">
					<a (click)="selectTab(tab)"
						attr.data-auto-id="AssetSelectTab-{{ tab.key }}"
						class="no-padding-bottom">
						<div class="tab__heading qtr-padding-bottom" [innerText]="tab.title"></div>
					</a>
				</li>
			</ul>
		</div>
		<div class="col-md-4 text-right">
			<span class="icon-filter icon-medium text-muted qtr-margin-right toggle"></span>
			<span class="text-large text-muted toggle" [innerText]="'_VisualFilters_' | i18n"></span>
			<span class="icon-dropdown qtr-padding-left toggle"></span>
			<span class="icon-location icon-small base-padding-left toggle"></span>
			<span class="icon-list-view icon-small qtr-padding-left toggle"></span>
			<span class="icon-grid-view icon-small qtr-padding-left toggle"></span>
		</div>
	</div>

	<div class="half-margin-top">
		<ng-container *ngTemplateOutlet="visibleTemplate; context: {}"></ng-container>
	</div>
</div>

<!-- Templates for our Tabs -->
<ng-template #assetsContent>
	<div class="flex flex-fill flex-fluid">
		<div class="flex-center">
			<span class="icon-chevron-left icon-medium text-muted toggle"></span>
		</div>
		<div *ngFor="let filter of filters; index as i"
			attr.data-auto-id="AssetsSelectVisualFilter-{{ filter.key }}"
			(click)="selectFilter(filter)"
			[ngClass]="{
				'filter__selected': filter.selected,
				'filter__not-selected': !filter.selected
			}"
			class="panel flex-center flex-fill filter">
			<div *ngIf="filter.template" class="base-margin-bottom">
				<ng-container *ngTemplateOutlet="filter.template; context: {}"></ng-container>
			</div>
			<div class="filter__title text-muted text-large" [innerText]="filter.title"></div>
		</div>
		<div class="flex-center">
			<span class="icon-chevron-right icon-medium text-muted toggle"></span>
		</div>
	</div>
	<div class="dbl-margin-top">
		<div *ngIf="inventory.length && !status.isLoading">
			<div class="flex flex-fluid">
				<div class="flex-fill half-padding-top" [innerText]="'_ShowingXofYAssets_' | i18n:inventory.length:assetParams.total"></div>
				<div class="btn-group btn-group--square">
					<div class="dropdown active dropdown--tail dropdown--left"
						data-auto-id="BulkDropdown"
						[ngClass]="{'active': bulkDropdown }"
						(click)="bulkDropdown = !bulkDropdown">
						<button class="btn btn--small btn--gray-ghost"><span class="icon-more"></span></button>
						<div class="dropdown__menu">
							<a [innerText]="'_ExportAssets_' | i18n:selectedAssets.length"></a>
							<a [innerText]="'_EditAssetTags_' | i18n:selectedAssets.length"></a>
							<a [innerText]="'_RunScanAssets_' | i18n:selectedAssets.length"></a>
							<div class="dropdown__divider"></div>
						</div>
					</div>
				</div>
			</div>
			<cui-table *ngIf="inventory.length && assetsTable"
				[data]="inventory"
				(onTableRowClicked)="rowSelected($event)"
				[options]="assetsTable">
			</cui-table>
			<div class="base-margin-top">
				<cui-pager [page]="assetParams.page"
					[limit]="assetParams.limit"
					[totalItems]="assetParams?.total || 0">
				</cui-pager>
			</div>
		</div>
		<div *ngIf="!inventory.length || status.isLoading">
			<cui-spinner></cui-spinner>
		</div>
	</div>
</ng-template>

<ng-template #contractsContent>
	<!-- TODO: Add data for contracts panel -->
</ng-template>

<ng-template #eoxContent>
<!-- TODO: Add data for eox panel -->
</ng-template>

<ng-template #advisoryFilter>
	<assets-bar-chart></assets-bar-chart>
</ng-template>

<ng-template #coverageFilter>
	<assets-pie-chart></assets-pie-chart>
</ng-template>

<ng-template #statusFilter>
	<assets-pie-chart></assets-pie-chart>
</ng-template>

<ng-template #typeFilter>
	<assets-pie-chart></assets-pie-chart>
</ng-template>

<!-- Templates for our Visual Filters for the Assets Tab -->
<ng-template #totalAssetsFilter>
	<div class="text-huge flex-center dbl-padding-left dbl-padding-right" [innerText]="assetParams?.total || 0"></div>
</ng-template>

<ng-template #casesAssetsFilter>
	<ng-container *ngTemplateOutlet="assetsWithChange; context: { assets: 17, trend: 'down', trendCount: 3 }"></ng-container>
</ng-template>

<ng-template #rmasAssetsFilter>
	<ng-container *ngTemplateOutlet="assetsWithChange; context: { assets: 12, trend: 'up', trendCount: 2 }"></ng-container>
</ng-template>

<ng-template #assetsWithChange let-assets="assets" let-trend="trend" let-trendCount="trendCount">
	<div class="half-margin-bottom flex-center">
		<span class="text-huge" [innerText]="assets"></span>
		<span class="text-medium" [innerText]="'_Assets_' | i18n"></span>
	</div>
	<div>
		<span class="icon-arrow-{{ trend }}-tail"></span>
		<span class="qtr-margin-left" [innerText]="trendCount"></span>
		<span class="qtr-margin-left">(24h change)</span>
	</div>
</ng-template>
