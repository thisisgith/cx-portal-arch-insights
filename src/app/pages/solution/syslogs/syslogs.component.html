<div class="panel panel--bordered base-padding-left base-padding-top no-padding-bottom">
	<insight-tabs></insight-tabs>
	<visual-filter-bar [filters]="filters">
		<ng-template #startingCard>
			<div class="container flex flex-column series">
				<div class="row toggle flex series__border series__border--left half-margin-bottom"
					*ngFor="let label of visualLabels; let i=index"
					data-auto-id="label?.label"
					(click)="selectVisualLabel(i)"
					[ngClass]="{ 'series__border--highlight' : label.active === true }"
				>
					<div class="col-md-4 text-right">
						<span class="series__data series__data--md"
							[ngClass]="{ 'text-primary' : label.active === true }"
						>{{ label?.count }}
						</span>
					</div>
					<div class="col-md-8 text-left">
						<span class="series__name series__name--md"
							[ngClass]="{ 'text-primary' : label.active === true }"
						>{{ label?.label }}
						</span>
					</div>
				</div>
			</div>
		</ng-template>
	</visual-filter-bar>
</div>
<div class="panel panel--bordered base-margin-top">
	<ng-container>
		<ng-container *ngTemplateOutlet="filterBar"></ng-container>
		<div class="divider qtr-margin-top"></div>
	</ng-container>
	<div *ngIf="visualLabels[0].active">
		<app-faults [faultFilter]="appliedFilters"></app-faults>
	</div>
	<div *ngIf="visualLabels[1].active">
		<syslogs-details [sysFilter]="appliedFilters" [solution]="solution" [useCase]="useCase"></syslogs-details>

	</div>
</div>

<ng-template #timeRangeFilter let-filter="filter">
	<column-chart
		[seriesData]="filter.seriesData"
		(subfilter)="onSubfilterSelect($event.filter, filter, true)"
	>
	</column-chart>
</ng-template>
<ng-template #faultsFilter let-filter="filter">
	<pie-chart
		[seriesData]="filter.seriesData"
		(subfilter)="onSubfilterSelect($event.filter, filter, true)"
	>
	</pie-chart>
</ng-template>
<ng-template #severityFilter let-filter="filter">
	<column-chart
		[seriesData]="filter.seriesData"
		(subfilter)="onSubfilterSelect($event.filter, filter, true)"
	>
	</column-chart>
</ng-template>
<ng-template #afmSeverityFilter let-filter="filter">
			<pie-chart
				[seriesData]="filter.seriesData"
				(subfilter)="onSubfilterSelect($event.filter, filter,true)"
			>
			</pie-chart>
		</ng-template>
<ng-template #filterBar>
	<div class="row flex-center-vertical">
		<div class="col-md-11 flex">
			<span
				class="flex flex-center-vertical base-margin-left half-margin-right filter-bar__title text-bold"
				[innerText]="'_Filtered_' | i18n | uppercase"
			></span>
			<ng-container *ngFor="let filter of selectedFilters">
				<ng-container
					*ngFor="let subfilter of getSelectedSubFilters(filter.key)"
				>
					<span
						class="label filter-bar__item"
						attr.data-auto-id="FilterTag-{{ subfilter.filter }}"
						(click)="onSubfilterClose(filter)"
					>
						<span [innerText]="'_SyslogTitleX_' | i18n : title : subfilter.label | titlecase"></span>
						<span *ngIf="faultFlag && (filter.key === 'afmSeverity' || filter.key === 'timeRange')" class="icon-close"></span>
					</span>
				</ng-container>
			</ng-container>
		</div>
		<div class="col-md-1 flex flex-center flex-center-vertical filter-bar__clear">
			<a
				(click)="clearFilters()"
				[innerText]="'_SyslogResetAll_' | i18n"
				data-auto-id="FilterBarClearAllFilters"
			>
			</a>
		</div>
	</div>
</ng-template>
